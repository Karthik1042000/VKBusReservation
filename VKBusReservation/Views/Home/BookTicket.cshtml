@using VKBusReservation.Models.DTO
@model AddReservationDTO
@{
    ViewData["Title"] = "Book Ticket";
    ViewData["Title2"] = "Edit Ticket";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var minDate = DateTime.Now.ToString("yyyy-MM-d");
}
<button type="button" class="btn btn-light pb-2"
        style="background-color:lightgoldenrodyellow;" onclick="GoHome()">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z" />
    </svg>
    Back to List
</button>
@if (Model.ReservationId <= 0)
{
     <h2 class="text-danger">@ViewData["Title"]</h2>
}
else
{
   <h2 class="text-danger ">@ViewData["Title2"]</h2>
}
<style>
    .required:after {
        content: " *";
        color: red;
    }
</style>

<div>
    <div style="width:100%" >
        <div style="width:40%; float:left;">
@using (Html.BeginForm(FormMethod.Post, new { id = "Reserve" }))
{
    <div class="p-3 text-dark  border rounded-3 " style="background-color: #eee;">
        @Html.HiddenFor(m => m.ReservationId )
        <div class="mb-3  row" >
            <div class=" col-4">
                <label class="form-label required ">  Customer Name</label>
            </div>
                        <div class="col-5">
                            @if (Model.ReservationId <= 0)
                            {
                                @Html.DropDownListFor(model => model.CustomerId,Model.CustomerList  , new { @class="form-control"})
                            }
                            else
                            {
                                @Html.TextBoxFor(m => m.CustomerName, new { @class="form-control",@readonly="readonly"})
                                @Html.HiddenFor(m => m.CustomerId)
                            }
                        </div>
                    </div>
        <div class="mb-3  row" >
            <div class=" col-4">
                <label class="form-label required">  From</label>
            </div>
            <div class="col-5">
                @Html.DropDownListFor(model => model.From,Model.FromList, new {@onChange="getBusDetail()" , required = "required", @class="form-control"})
                </div>
        </div>
        <div class="mb-3 row ">
            <div class="col-4">
                <label class="form-label required">To</label>
            </div>
            <div class="col-5">
                @Html.DropDownListFor(model => model.To,Model.ToList  , new {@onChange="getBusDetail()", required = "required" ,@class="form-control"})
            </div>
        </div>
        <div class="mb-3 row ">
            <div class="col-4">
                <label class="form-label required">Date</label>
            </div>
            <div class="col-5">
                            @Html.TextBoxFor(m => m.Reservationdate , new {@onChange="getReservation()",@class="form-control", required = "required" ,type="date",min=@minDate})
            </div>
        </div>
        <div class="mb-3  row ">
            <div class="col-4">
                <label class="form-label">Bus Number</label>
            </div>
                        <div class="col-5">
                            @Html.TextBoxFor(m => m.BusNumber, new { @class="form-control",@readonly="readonly",id="busNumber"})
            </div>
        </div>
        <div class="mb-3  row ">
            <div class="col-4">
                <label class="form-label">Available Seats</label>
            </div>
                        <div class="col-5 ">
                            @Html.TextBoxFor(m => m.AvailableSeats, new { @class="form-control",@readonly="readonly",id="availableSeats"})
            </div>
        </div>
        <div class="mb-3  row ">
            <div class="col-4">
                <label class="form-label">Reserved Seats</label>
            </div>
                        <div class="col-5">
               @* <label class="form-label" id="reservedSeat"></label>*@
                            @Html.TextBoxFor(m => m.ReservedSeats, new { @class="form-control",@readonly="readonly",id="reservedSeats"})
            </div>
        </div>
        <div class="mb-3  row ">
            <div class="col-4">
                <label class="form-label required">Number Of BookingSeats</label>
            </div>
            <div class="col-5">
                @Html.TextBoxFor(m => m.NumberOfSeats , new {@class="form-control", required = "required" ,type ="number",min = "1" ,max = "50"})
            </div>
        </div>
        <div class="mb-3 row justify-content-center">
            <div class="col-4">
                <button type="submit" class="btn btn-outline-primary">Submit</button>
                
            </div>
        </div>
        @Html.HiddenFor(m => m.NumberOfSeats ,new{@class="form-control" ,id="totalNumberOfSeat"} )
        @Html.HiddenFor(m => m.BusId ,new{@class="form-control" ,id="busId"} )
    </div>
}
        </div>
        <div class="container-fluid" style="width:60%; float:right;">
<table id="busList" class="table table-hover borderd " style="display:none">
                <thead style="background-color:#ddd;">
    <tr>
            <th class="text-center">Bus Id</th>
            <th class="text-center">Bus Name</th>
            <th class="text-center">Bus Number</th>
            <th class="text-center">Ticket Price</th>
            <th class="text-center">Total Seats</th>
            <th class="text-center">Trip Start Time</th>
            <th>Trip End Time</th>
            <th>Action</th>
    </tr>
  </thead>
  <tbody>
    
  </tbody>
  </table>

        </div>
    </div>
</div>